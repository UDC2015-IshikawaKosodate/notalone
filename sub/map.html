<!DOCTYPE html>
<html>
    <head>
        <title>能登ノットアローン｜マップ</title>
	<link rel="stylesheet" href="../css/notalone.css">


        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <!-- Sets initial viewport load and disables zooming  -->
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">

        <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="apple-touch-icon-precomposed" href="img/icon.png" />

        <!-- Include the compiled Ratchet CSS -->
        <link href="css/ratchet.css" rel="stylesheet">

        <!-- Include the compiled Ratchet JS -->
        <script src="js/ratchet.js"></script>

        <!-- Include fork origin -->
        <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js"></script>
        <script src="js/main.js"></script>

        <!-- Include bookmark_bubble -->
        <!--script src="js/mobile-bookmark-bubble/bookmark_bubble.js"></script-->
        <!--script src="js/mobile-bookmark-bubble/example/example.js"></script-->

    </head>

    <body onload="initlaize(); map_fit();">

        <!-- Make sure all your bars are the first things in your <body> -->
        <header class="bar bar-nav">
	    <div id="top-menu" onClick="top_index()">能登ノットアローン</div>
            <!--h1 class="title">子育て応援マップ</h1-->
        </header>

        <div class="content">
            <div id="loading" style="font-color:#ffffff">Now Loading....</div>
            <div id="map_canvas" style="width:100%; height:480px;"></div>
        </div>
        <nav class="bar bar-tab" style="display:none;">
            <a class="tab-item active" href="#">
                食べる
            </a>
            <a class="tab-item" href="#">
                遊ぶ
            </a>
            <a class="tab-item" href="#">
                買う
            </a>
        </nav>
        <nav class="bar bar-tab" style="display:block;">
	    <select id="mapSelecter" style="text-align:center">
		<option value="1">子育て安心マップ</option>
		<option value="2">子どもの公園</option>
		<option value="3">保育サポート</option>
		<option value="4">子育て相談施設</option>
		<option value="5">赤ちゃんの駅</option>
		<option value="6">プレミアム・パスポート</option>
	    </select>
		<input type="button" onClick="clearMapPins()" value="ピンを消す" />
	</nav>
    </body>
</html>

<script type="text/javascript">

//** notalone *****
var TopHeight = 30;				//トップメニューの縦幅
	$("#top-menu").height(TopHeight);
	$("#top-menu").css({"line-height" : TopHeight + "px"});


	//****for index.html *******
	$("#menu-back").height(TopHeight);
	$("#menu-back").css({"line-height" : TopHeight + "px"});

//topメニュー
function top_index(){
	location.href = "../index.html";
}

//******************

function map_fit(){
	//ブラウザの縦サイズにフィットさせる
	//上下に設置するdiv縦幅
	var ajust = 81;
	$('#map_canvas').css({
		'height' : (window.innerHeight - ajust) + "px",
		'width'  : window.innerWidth + "px"
	});
}

//window risize 時の処理
$(window).resize(function(){
	map_fit();
});



//****** 複数マップの対応機能 ******

//マップの選択
var mapNo = 1;
$('#mapSelecter').change(function(){
	$('#mapSelecter option:selected').each(function(){
		mapNo = parseInt($(this).val());
	});
	//alert(mapNo);
	
	pushPins(googlemap);
}).change();

//ピン情報保存用の配列
var markersArray = new google.maps.MVCArray();
function clearMapPins(){
	markersArray.forEach(function (marker, idx) { marker.setMap(null); });
	mapPinsArray = new Array();
}

//個別マップ対応テーブル
var _MapTable;
var _Category;
var _Name;
var _Address;
var _Tel;
var _Url;
var _Opentime;
var _Restdates;
var _Description;
var _Lat;
var _Lng;

function mapConvertTable(mapNo){ 

	switch(mapNo){
		//子育て安心マップ
		case 1 :
	
		_MapTable	= '../uploads/mapinfo/wajima.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= 'phone1';
		_Url		= 'url';
		_Opentime	= 'servicetime';
		_Restdates	= 'holiday';
		_Description	= 'memo1';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

		//子どもの公園
		case 2 :
	
		_MapTable	= '../uploads/mapinfo/park.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= '';
		_Url		= '';
		_Opentime	= '';
		_Restdates	= '';
		_Description	= 'area';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

		//保育サポート
		case 3 :
	
		_MapTable	= '../uploads/mapinfo/leave.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= 'phone1';
		_Url		= 'url';
		_Opentime	= '';
		_Restdates	= '';
		_Description	= 'memo1';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

		//子育て相談施設
		case 4 :
	
		_MapTable	= '../uploads/mapinfo/consultation.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= 'phone';
		_Url		= '';
		_Opentime	= '';
		_Restdates	= '';
		_Description	= '';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

		//赤ちゃんの駅
		case 5 :
	
		_MapTable	= '../uploads/mapinfo/openData_baby.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= 'phone';
		_Url		= 'url';
		_Opentime	= 'servicetime';
		_Restdates	= 'holiday';
		_Description	= 'op_1';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

		//プレミアムパスポート
		case 6 :
	
		_MapTable	= '../uploads/mapinfo/openData_prepass.csv';
		_Category 	= '';
		_Name 		= 'name';
		_Address	= 'address';
		_Tel		= 'phone';
		_Url		= 'url';
		_Opentime	= 'servicetime';
		_Restdates	= 'holiday';
		_Description	= 'prepass';
		_Lat		= 'lat';
		_Lng		= 'lng';

       		break;

	}
}

</script>
